<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:replace="fragments/header.html :: header">
<title id="pageTitle">Lijst met recepten</title>
</head>

<body>

	<div th:replace="fragments/banner.html :: banner"></div>

	<div id="wrapper">
	
		<div th:replace="fragments/navigation.html :: main-nav"></div>

		<div id="content-wrapper" class="container mt-2">
		
			<div class="row justify-content-center mb-3">
				<a class="btn btn-success bg-success m-2" th:href="@{/recipe/list}" role="button">Naar overzicht</a> 
				<a class="btn btn-success bg-success m-2" th:href="@{'/recipe/' + ${recipe.id} + '/update'}" role="button">Recept wijzigen</a>
				<a class="btn btn-success bg-success m-2" th:href="@{'/ingredient/list/' + ${recipe.id}}" role="button">Ingrediënten wijzigen</a> 
				<a class="btn btn-danger bg-danger m-2"	th:href="@{'/recipe/' + ${recipe.id} + '/delete'}" role="button">Recept	verwijderen</a>
			</div>

			<div class="row">
				<h1 th:text="${recipe.name}" class="mb-5 pageheader"></h1>
			</div>

			<div class="row">

				<div class="col-md-6">
					<div class="row">
						<table class="table table-bordered table-striped ml-3">
							<tbody>
								<tr>
									<td>Trefwoorden:</td>
									<td th:text="${recipe.getTagString()}"></td>
								</tr>
								<tr>
									<td>Voorbereidingstijd:</td>
									<td th:if="${recipe.preparationTime} != null"
										th:text="${recipe.preparationTime} + ' min'"></td>
								</tr>
								<tr>
									<td>Bereidingstijd:</td>
									<td th:text="${recipe.cookTime} + ' min'"></td>
								</tr>
								<tr>
									<td>Recept type:</td>
									<td th:text="${recipe.recipeType.getDisplayName()}"></td>
								</tr>
								<tr>
									<td>Aantal persoon:</td>
									<td th:text="${recipe.servings}"></td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
				<div class="col-md-6">
					<img class="rounded mx-auto mb-3"
						th:src="@{'/recipe/' + ${recipe.id} + '/recipeimage'}">
				</div>
			</div>

			<div class="d-flex flex-column row-hl mt-3">
				<h3>Ingrediënten</h3>
				<div class="col-md-6">
					<div class="row">
				<table id=ingredients class="table table-sm item-hl">
					<tbody>
						<tr th:each="ingredient : ${recipe.getIngredients()}">
							<td 
								th:text="${#strings.replace(ingredient.getAmount(),'.0','')}">
							</td>
							<td
								th:text="(${ingredient.getAmount() >= 2} ? ${ingredient.getMeasureUnit().getPluralDisplayName()}
										 : ${ingredient.getMeasureUnit().getDisplayName()})">
							</td>
							<td
								th:text="(${ingredient.getAmount() >= 2} ? ${ingredient.getName().getPluralName()}
										 : ${ingredient.getName().getName()})">
							</td>
							<td class="text-center"><input type="checkbox"
							th:checked="${ingredient.getName().isStock()}"
							disabled="disabled">
						</td>
						</tr>
					</tbody>
				</table>
				</div>
				</div>
			</div>

			<div class="d-flex flex-column row-hl mt-3">
				<h3>Voorbereiding</h3>
				<p
					th:utext="${#strings.replace(#strings.escapeXml(recipe.preparations),
							T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}"></p>
			</div>

			<div class="d-flex flex-column row-hl mt-3">
				<h3>Bereiding</h3>
				<p
					th:utext="${#strings.replace(#strings.escapeXml(recipe.directions),
							T(java.lang.System).getProperty('line.separator'),'&lt;br /&gt;')}"></p>
			</div>

			<div class="d-flex flex-column row-hl mt-3 mb-5">

				<h3>Aantekeningen</h3>
				<p th:if="${recipe.notes != null}" th:text="${recipe.notes}"></p>
			</div>
		</div>
		<!-- /#content-wrapper -->

	</div>
	<!-- /#wrapper -->

	<div th:replace="fragments/footer.html :: bootstrap4js"></div>
	<script th:src="@{/js/navigation.js}"></script>

</body>
</html>